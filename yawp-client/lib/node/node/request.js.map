{"version":3,"sources":["../../../src/node/request.js"],"names":[],"mappings":";;;;;kBAMwB,O;;AANxB;;AAEA,IAAI,OAAO,KAAP,KAAiB,WAArB,EAAkC;AAC9B,QAAI,QAAQ,QAAQ,YAAR,CAAZ;AACH;;AAEc,SAAS,OAAT,CAAiB,GAAjB,EAAsB,OAAtB,EAA+B;AAC1C,QAAI,QAAQ,QAAQ,KAApB;AACA,WAAO,QAAQ,KAAf;;AAEA,WAAQ,QAAQ,MAAM,uBAAW,KAAX,CAAd,GAAkC,EAA1C;;AAEA,QAAI,CAAC,QAAQ,IAAb,EAAmB;AACf,eAAO,MAAM,GAAN,EAAW,OAAX,CAAP;AACH;AACD,WAAO,YAAY,OAAZ,EAAqB,GAArB,CAAP;AACH;;AAED,SAAS,WAAT,CAAqB,OAArB,EAA8B,GAA9B,EAAmC;AAC/B,YAAQ,OAAR,GAAkB,QAAQ,OAAR,IAAmB,EAArC;AACA,uBAAO,QAAQ,OAAf,EAAwB;AACpB,kBAAU,kBADU;AAEpB,wBAAgB;AAFI,KAAxB;AAIA,WAAO,MAAM,GAAN,EAAW,OAAX,EAAoB,IAApB,CAAyB,UAAC,QAAD;AAAA,eAAc,SAAS,IAAT,EAAd;AAAA,KAAzB,CAAP;AACH","file":"request.js","sourcesContent":["import { extend, toUrlParam } from '../commons/utils';\n\nif (typeof fetch === 'undefined') {\n    var fetch = require('node-fetch');\n}\n\nexport default function request(url, options) {\n    var query = options.query;\n    delete options.query;\n\n    url += (query ? '?' + toUrlParam(query) : '');\n\n    if (!options.json) {\n        return fetch(url, options);\n    }\n    return jsonRequest(options, url);\n}\n\nfunction jsonRequest(options, url) {\n    options.headers = options.headers || {};\n    extend(options.headers, {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json;charset=UTF-8',\n    });\n    return fetch(url, options).then((response) => response.json());\n}\n"]}